<html>
<title>Restaurant Page</title>

<head>
	<script src="../javascripts/draw.js"></script>
	<script src="../javascripts/mapManager.js"></script>
	<script src="../javascripts/mapCreator.js"></script>
	<script src="../javascripts/bookingManager.js"></script>

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Load Script and Stylesheet -->
	<link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">


	<link rel="stylesheet" href="../stylesheets/style.css"> Logged in as: {{ user }}

</head>





<center>
	<canvas id="canvas" width="100%" height="100%"></canvas>
</center>

{{ status }}

<form action="/users/booking" method="post">
	TableID:<br>
	<input type="text" id="tableID" name="tableID" value="1" style="color:#888;" onfocus="inputFocus(this)" onblur="inputBlur(this)" readonly="true" /><br> Time(hh:mm):
	<br>
	<input type="text" name="time" value="12:00"><br> Duration:
	<br>
	<input type="text" name="duration" value="2 hours" style="color:#888;" onfocus="inputFocus(this)" onblur="inputBlur(this)" disabled="disabled"><br>
	<input type="submit" value="Submit">

</form>




<form action="/users/getBookings" method="post">
	<input type="submit" value="get bookings">
</form>




<table>
	<tr>
		<th>Table</th>
		<th>Time</th>
	</tr>
</table>

<form action="/users/deleteBooking" method="post">
	{{#booking}}
	<input type="hidden" name="id" value="{{booking.tableID}}" />
	<input type="hidden" name="time" value="{{booking.time}}" />


	<div class="getTableID">
		<table>
			<tr>
				<td>{{#tableID}} {{.}} {{/tableID}}

				</td>

				<td>{{#time}} {{.}} {{/time}}
				</td>

				<td>
					<input type="submit" name="delete" value="Delete" />
				</td>
				<td>

				</td>

			</tr>

		</table>
	</div>



	{{/booking}}
</form>




<script>
	var s = "{{map}}"
	map = stringToMap(s);
	getTable(map);
	var bookings = getBookings();
	getBookedTables(bookings);

	setInterval(function() {
		getBookedTables(getBookings());
		console.log("updated");
	}, 7000);
</script>




<!--
<table>
	{{#bookings}}
	<tr>
		<td>{{ bookings.tableID }}</td>
	</tr>
	<tr>
		<td>{{ bookings.time }}</td>
	</tr>
	{{/bookings}}
</table>
!-->



</html>
